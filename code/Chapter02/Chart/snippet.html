 <pre><code style="display: block; padding: 0.5em; background-color: #f4f4f4; font-size: 0.75em; color: black;"><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">001:</span><span class="comment" style="color: #777;">//&nbsp;A&nbsp;module&nbsp;is&nbsp;a&nbsp;boundary:&nbsp;a&nbsp;self-invoking&nbsp;function&nbsp;a.k.a.&nbsp;closure.</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">002:</span><span class="comment" style="color: #777;">///////////////////////////////////////////////////////////////////</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">003:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">004:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">005:</span><span class="comment" style="color: #777;">//&nbsp;Our&nbsp;new&nbsp;module&nbsp;in&nbsp;the&nbsp;D3&nbsp;namespace:&nbsp;et&nbsp;Dieu&nbsp;cr√©a&nbsp;la&nbsp;closure!&nbsp;(The&nbsp;Sequel)</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">006:</span>d3.edge&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">007:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;private_variable_a;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">008:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">009:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;private&nbsp;function</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">010:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">X</span><span class="params">()</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">011:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">012:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug.log(<span class="string" style="color: #050;">"E#10:&nbsp;exec&nbsp;private&nbsp;function&nbsp;:&nbsp;"</span>,&nbsp;getCurrentFunctionName().func_n_loc);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">013:</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">014:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">015:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;'edge'&nbsp;is&nbsp;a&nbsp;local&nbsp;variable,&nbsp;which&nbsp;we&nbsp;return&nbsp;at&nbsp;the&nbsp;end.</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">016:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;It&nbsp;is&nbsp;a&nbsp;function,&nbsp;which&nbsp;is&nbsp;a&nbsp;First&nbsp;Class&nbsp;Citizen&nbsp;in&nbsp;JavaScript,</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">017:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;thus&nbsp;it&nbsp;also&nbsp;serves&nbsp;as&nbsp;an&nbsp;object.</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">018:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;edge&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">019:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">020:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug.log(<span class="string" style="color: #050;">"E#10:&nbsp;exec&nbsp;returned&nbsp;function&nbsp;:&nbsp;"</span>,&nbsp;getCurrentFunctionName().func_n_loc);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">021:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">022:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;use&nbsp;the&nbsp;privates:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">023:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">024:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">025:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++private_variable_a;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">026:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">027:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">028:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">029:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;API&nbsp;function&nbsp;d3.edge.A():</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">030:</span>&nbsp;&nbsp;&nbsp;&nbsp;edge.A&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">031:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">032:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug.log(<span class="string" style="color: #050;">"E#10:&nbsp;exec&nbsp;A()&nbsp;API&nbsp;function&nbsp;:&nbsp;"</span>,&nbsp;getCurrentFunctionName().func_n_loc);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">033:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">034:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;call&nbsp;the&nbsp;private&nbsp;function:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">035:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">036:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">037:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;allow&nbsp;chaining&nbsp;if&nbsp;we've&nbsp;nothing&nbsp;better&nbsp;to&nbsp;return:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">038:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;edge;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">039:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">040:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">041:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;API&nbsp;function&nbsp;d3.edge.B():</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">042:</span>&nbsp;&nbsp;&nbsp;&nbsp;edge.B&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">043:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">044:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug.log(<span class="string" style="color: #050;">"E#10:&nbsp;exec&nbsp;B()&nbsp;API&nbsp;function&nbsp;:&nbsp;"</span>,&nbsp;getCurrentFunctionName().func_n_loc);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">045:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">046:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;call&nbsp;the&nbsp;private&nbsp;function:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">047:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">048:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">049:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;allow&nbsp;chaining&nbsp;if&nbsp;we've&nbsp;nothing&nbsp;better&nbsp;to&nbsp;return:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">050:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;edge;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">051:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">052:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">053:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;edge;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">054:</span>};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">055:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">056:</span><span class="comment" style="color: #777;">/*&nbsp;usage&nbsp;of&nbsp;the&nbsp;above&nbsp;'reusable&nbsp;function'&nbsp;*/</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">057:</span>debug.log(<span class="string" style="color: #050;">"E#10.a:&nbsp;going&nbsp;to&nbsp;instance&nbsp;the&nbsp;d3.edge&nbsp;component&nbsp;with&nbsp;.A()&nbsp;and&nbsp;.B()&nbsp;API&nbsp;functions&nbsp;:&nbsp;"</span>,&nbsp;getCurrentFunctionName().func_n_loc);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">058:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">059:</span><span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;instance&nbsp;=&nbsp;d3.edge();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">060:</span><span class="comment" style="color: #777;">//&nbsp;and&nbsp;lo,&nbsp;you&nbsp;can&nbsp;already&nbsp;use&nbsp;it:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">061:</span>instance();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">062:</span><span class="comment" style="color: #777;">//&nbsp;that&nbsp;will&nbsp;run&nbsp;this&nbsp;code&nbsp;shown&nbsp;before:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">063:</span><span class="comment" style="color: #777;">//</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">064:</span><span class="comment" style="color: #777;">//&nbsp;&nbsp;//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">065:</span><span class="comment" style="color: #777;">//&nbsp;&nbsp;//&nbsp;use&nbsp;the&nbsp;privates:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">066:</span><span class="comment" style="color: #777;">//&nbsp;&nbsp;private_function_b();</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">067:</span><span class="comment" style="color: #777;">//&nbsp;&nbsp;//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">068:</span><span class="comment" style="color: #777;">//&nbsp;&nbsp;++private_variable_a;</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">069:</span><span class="comment" style="color: #777;">//&nbsp;&nbsp;//&nbsp;...</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">070:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">071:</span><span class="comment" style="color: #777;">//&nbsp;now&nbsp;call&nbsp;the&nbsp;API&nbsp;functions&nbsp;A()&nbsp;and&nbsp;B():</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">072:</span>instance.A();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">073:</span>instance.B();</code></pre> 
